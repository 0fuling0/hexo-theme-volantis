<script>
window.volantis={};
/********************脚本懒加载函数********************************/
function loadScript(src, cb) {
var HEAD = document.getElementsByTagName('head')[0] || document.documentElement;
var script = document.createElement('script');
script.setAttribute('type','text/javascript');
if (cb) script.onload = cb;
script.setAttribute('src', src);
HEAD.appendChild(script);
}
//https://github.com/filamentgroup/loadCSS
!function(c){"use strict";var e=function(e,t,n,r){var o,i=c.document,a=i.createElement("link");if(t)o=t;else{var d=(i.body||i.getElementsByTagName("head")[0]).childNodes;o=d[d.length-1]}var f=i.styleSheets;if(r)for(var l in r)r.hasOwnProperty(l)&&a.setAttribute(l,r[l]);a.rel="stylesheet",a.href=e,a.media="only x",function e(t){if(i.body)return t();setTimeout(function(){e(t)})}(function(){o.parentNode.insertBefore(a,t?o:o.nextSibling)});var s=function(e){for(var t=a.href,n=f.length;n--;)if(f[n].href===t)return e();setTimeout(function(){s(e)})};function u(){a.addEventListener&&a.removeEventListener("load",u),a.media=n||"all"}return a.addEventListener&&a.addEventListener("load",u),(a.onloadcssdefined=s)(u),a};"undefined"!=typeof exports?exports.loadCSS=e:c.loadCSS=e}("undefined"!=typeof global?global:this);
</script>
<!-- required -->
<%- js(theme.plugins.jquery) %>
<%- partial('../../_third-party/fancybox/script') %>

<!-- internal -->
<%- partial('cover') %>
<% if (theme.rightmenu.enable == true) { %>
  <%- partial('../rightmenu') %>
<% } %>

<% if (theme.plugins.issues.enable) { %>
  <%- partial('../../_third-party/issues/script') %>
<% } %>

<% if (theme.plugins.lazyload && theme.plugins.lazyload.enable) { %>
  <%- partial('../../_third-party/lazyload/script') %>
<% } %>

<% if (theme.plugins.preload.enable && theme.plugins.preload.service) { %>
  <% let preload = theme.plugins.preload; %>
  <% if (preload.service == 'instant_page') { %>
    <script async src="<%- preload.instant_page %>" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <% } else if (preload.service == 'flying_pages') { %>
    <script>
      window.FPConfig = {
        delay: 0,
        ignoreKeywords: [],
        maxRPS: 5,
        hoverDelay: 25
      };
    </script>
    <script defer src="<%- preload.flying_pages %>"></script>
  <% } %>
<% } %>


<% if (theme.plugins.clipboard.enable && (theme.custom_css.body.highlight.copy_btn == true)) { %>
  <%- partial('../../_third-party/clipboard/script') %>
<% } %>

<% if (theme.plugins.scrollreveal.enable && theme.plugins.scrollreveal.js) { %>
   <%- partial('../../_third-party/scrollreveal/script') %>
<% } %>

<% if (theme.plugins.aplayer && theme.plugins.aplayer.enable && theme.plugins.aplayer.js) { %>
  <%- partial('../../_third-party/aplayer/script') %>
<% } %>

<% if (theme.comments.service && theme.comments.service.length > 0) { %>
  <%- partial('../../_third-party/comments/' + theme.comments.service + '/script') %>
<% } %>

<% if (theme.analytics.busuanzi) { %>
  <script defer src="<%- theme.analytics.busuanzi %>" data-pjax></script>
<% } %>
<% if (config.use_cdn && theme.info.cdn && theme.info.cdn.js) { %>
  <%- js(theme.info.cdn.js) %>
<% } else { %>
  <%- js(['js/app.js']) %>
<% } %>

<% if (theme.search.enable) { %>
  <% if (theme.search.js) { %>
    <%- js(theme.search.js) %>
  <% } else { %>
    <%- js(['js/search.js']) %>
  <% } %>
<% } %>

<!-- optional -->
<% if (theme.search && theme.search.enable) { %>
  <%- partial('search') %>
<% } %>


<% if (theme.plugins.nodewaves.enable) { %>
  <%- js({src: theme.plugins.nodewaves.js}) %>
  <script type="text/javascript">
    $(function () {
      Waves.attach('.flat-btn', ['waves-button']);
      Waves.attach('.float-btn', ['waves-button', 'waves-float']);
      Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
      Waves.attach('.flat-box', ['waves-block']);
      Waves.attach('.float-box', ['waves-block', 'waves-float']);
      Waves.attach('.waves-image');
      Waves.init();
    });
  </script>
<% } %>

<% if (theme.plugins.comment_typing.enable) { %>
  <%- js(theme.plugins.comment_typing.js) %>
<% } %>

<% if (theme.plugins.highlightjs.enable) { %>
  <% if (theme.plugins.highlightjs.js) { %>
    <%- js(theme.plugins.highlightjs.js) %>
    <script>hljs.initHighlightingOnLoad();</script>
  <% } %>
<% } %>

<% if (theme.analytics && theme.analytics.leancloud && theme.analytics.leancloud.app_id) { %>
  <%- partial('counter') %>
<% } %>

<% if (config.google_analytics_key) { %>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script>
setTimeout(function() {
  window.ga_tid = '<%- config.google_analytics_key %>';
   (function() {
	 var dga = document.createElement("script");
	 dga.src = "https://rmt.dogedoge.com/fetch/public/ga.js";
	  var s = document.getElementsByTagName("script")[0];
	  s.parentNode.insertBefore(dga, s);
  })();
}, 5000);
</script>
<% } %>
<% if (config.baidu_analytics_key) { %>
<!-- ba -->
<script>
var _hmt = _hmt || [];
(function() {
  setTimeout(function() {
	var hm = document.createElement("script");
	hm.src = "https://hm.baidu.com/hm.js?<%= config.baidu_analytics_key %>";
	hm.defer=true;
	var s = document.getElementsByTagName("script")[0];
	s.parentNode.insertBefore(hm, s);
  }, 5000);
})();
</script>
<% } %>
  <% if (theme.plugins.darkmodejs.enable) { %>
    <%- partial('darkmode') %>
  <% } %>
<!-- more -->
<% if (config.import && config.import.script) { %>
  <%- partial('import') %>
<% } %>

<%- partial('toc') %>
